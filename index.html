<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VietTravelGuide - Du l·ªãch th√¥ng minh Vi·ªát Nam</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Leaflet CSS & JS cho b·∫£n ƒë·ªì -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <style>
        /* Reset v√† base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 80px 20px;
            text-align: center;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-50px, -50px) rotate(360deg); }
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }

        .tagline {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        /* CTA Buttons */
        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #1e3c72;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        /* Features Section */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 60px 0;
        }

        .feature-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #4CAF50, #2196F3);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #1e3c72;
        }

        .feature-card h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        /* Map Preview */
        .map-preview {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin: 40px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            text-align: center;
        }

        .map-placeholder {
            height: 500px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        /* Technology Stack */
        .tech-stack {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin: 40px 0;
        }

        .tech-item {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 120px;
            transition: all 0.3s ease;
        }

        .tech-item:hover {
            transform: scale(1.05);
        }

        .tech-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #1e3c72;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 50px 20px;
            margin-top: 60px;
            border-radius: 30px 30px 0 0;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            color: white;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: #4CAF50;
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            opacity: 0.8;
        }

        /* ========== SEARCH & FILTER STYLES ========== */
        .filter-btn {
            padding: 12px 25px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .filter-btn:hover {
            background: #f0f7ff;
            border-color: #1e3c72;
            transform: translateY(-2px);
        }
        
        .filter-btn.active {
            background: #1e3c72;
            color: white;
            border-color: #1e3c72;
        }
        
        .filter-btn i {
            font-size: 16px;
        }
        
        #search-input:focus {
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }
        
        #search-suggestions div {
            padding: 10px 15px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.3s;
        }
        
        #search-suggestions div:hover {
            background: #f5f7fa;
            border-radius: 5px;
        }
        
        #search-suggestions div:last-child {
            border-bottom: none;
        }
        
        #search-suggestions div i {
            margin-right: 10px;
            color: #1e3c72;
            width: 20px;
        }

        /* ========== PWA SECTION STYLES ========== */
        .pwa-section {
            background: white;
            padding: 60px 40px;
            border-radius: 25px;
            margin: 60px 0;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .pwa-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7);
        }

        .pwa-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .pwa-feature {
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .pwa-feature:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .pwa-feature i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #1e3c72;
        }

        /* ========== FACILITIES BUTTONS ========== */
        .facility-btn {
            padding: 30px 20px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            color: #1e3c72;
            text-align: center;
        }

        .facility-btn:hover {
            background: #1e3c72;
            color: white;
            transform: translateY(-5px) scale(1.05);
            border-color: #1e3c72;
            box-shadow: 0 10px 25px rgba(30, 60, 114, 0.2);
        }

        .facility-btn i {
            font-size: 2.8rem;
            margin-bottom: 15px;
            display: block;
        }

        /* ========== PLANNER SECTION ========== */
        .planner-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 40px;
            border-radius: 25px;
            margin: 60px 0;
            text-align: center;
        }

        .planner-section h2 {
            font-size: 2.8rem;
            margin-bottom: 20px;
        }

        /* ========== END SEARCH STYLES ========== */

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .features { grid-template-columns: 1fr; }
            .cta-buttons { flex-direction: column; align-items: center; }
            .btn { width: 100%; max-width: 300px; justify-content: center; }
            .pwa-features { grid-template-columns: 1fr; }
            .planner-section h2 { font-size: 2rem; }
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feature-card, .map-preview, .tech-item, .pwa-feature {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1><i class="fas fa-map-marked-alt"></i> VietTravelGuide</h1>
            <p class="tagline">H·ªá th·ªëng h∆∞·ªõng d·∫´n du l·ªãch th√¥ng minh - Kh√°m ph√° Vi·ªát Nam theo c√°ch ho√†n to√†n m·ªõi</p>
            
            <div class="cta-buttons">
                <button class="btn btn-primary" onclick="startExploring()">
                    <i class="fas fa-play-circle"></i> B·∫Øt ƒë·∫ßu kh√°m ph√°
                </button>
                <a href="#features" class="btn btn-secondary">
                    <i class="fas fa-info-circle"></i> T√¨m hi·ªÉu th√™m
                </a>
            </div>
        </div>
    </header>

    <!-- Search & Filter Section -->
    <div style="background: white; padding: 30px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
        <div class="container">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #1e3c72;">
                    <i class="fas fa-search"></i> T√¨m ki·∫øm ƒëi·ªÉm du l·ªãch
                </h2>
                <p>T√¨m ki·∫øm theo t√™n, ƒë·ªãa ƒëi·ªÉm ho·∫∑c lo·∫°i h√¨nh du l·ªãch</p>
            </div>
            
            <!-- Search Bar -->
            <div style="max-width: 600px; margin: 0 auto 20px;">
                <div style="display: flex; gap: 10px;">
                    <input type="text" 
                           id="search-input" 
                           placeholder="Nh·∫≠p t√™n ƒëi·ªÉm du l·ªãch, t·ªânh th√†nh..."
                           style="flex: 1; 
                                  padding: 15px 20px; 
                                  border: 2px solid #e0e0e0; 
                                  border-radius: 50px; 
                                  font-size: 16px;
                                  outline: none;
                                  transition: border 0.3s;">
                    <button onclick="searchLocation()" 
                            style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); 
                                   color: white; 
                                   border: none; 
                                   padding: 0 30px; 
                                   border-radius: 50px; 
                                   cursor: pointer;
                                   font-weight: bold;
                                   transition: transform 0.3s;">
                        <i class="fas fa-search"></i> T√¨m
                    </button>
                </div>
                
                <!-- Search Suggestions -->
                <div id="search-suggestions" 
                     style="display: none; 
                            background: white; 
                            border: 1px solid #e0e0e0; 
                            border-radius: 10px; 
                            margin-top: 10px; 
                            padding: 10px;
                            box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <div style="padding: 5px; cursor: pointer;" onclick="quickSearch('H√† N·ªôi')">
                        <i class="fas fa-city"></i> H√† N·ªôi
                    </div>
                    <div style="padding: 5px; cursor: pointer;" onclick="quickSearch('H·∫° Long')">
                        <i class="fas fa-umbrella-beach"></i> V·ªãnh H·∫° Long
                    </div>
                    <div style="padding: 5px; cursor: pointer;" onclick="quickSearch('Hu·∫ø')">
                        <i class="fas fa-landmark"></i> Hu·∫ø
                    </div>
                    <div style="padding: 5px; cursor: pointer;" onclick="quickSearch('H·ªôi An')">
                        <i class="fas fa-history"></i> H·ªôi An
                    </div>
                </div>
            </div>
            
            <!-- Filter Buttons -->
            <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                <button onclick="filterByType('all')" 
                        class="filter-btn active"
                        style="background: #1e3c72; color: white;">
                    <i class="fas fa-globe-asia"></i> T·∫•t c·∫£
                </button>
                <button onclick="filterByType('unesco')" 
                        class="filter-btn">
                    <i class="fas fa-award"></i> Di s·∫£n UNESCO
                </button>
                <button onclick="filterByType('beach')" 
                        class="filter-btn">
                    <i class="fas fa-umbrella-beach"></i> Bi·ªÉn ƒë·∫£o
                </button>
                <button onclick="filterByType('mountain')" 
                        class="filter-btn">
                    <i class="fas fa-mountain"></i> N√∫i r·ª´ng
                </button>
                <button onclick="filterByType('cultural')" 
                        class="filter-btn">
                    <i class="fas fa-landmark"></i> VƒÉn h√≥a
                </button>
                <button onclick="filterByType('historical')" 
                        class="filter-btn">
                    <i class="fas fa-history"></i> L·ªãch s·ª≠
                </button>
                <button onclick="filterByType('city')" 
                        class="filter-btn">
                    <i class="fas fa-city"></i> Th√†nh ph·ªë
                </button>
            </div>
        </div>
    </div>
    
    <!-- Filter Status -->
    <div id="filter-status" 
         style="text-align: center; 
                padding: 10px; 
                background: #f8f9fa; 
                border-radius: 10px; 
                margin: 20px auto; 
                max-width: 800px;">
        ƒêang hi·ªÉn th·ªã: <span id="current-filter">T·∫•t c·∫£ ƒëi·ªÉm du l·ªãch</span>
        <span id="result-count" style="background: #4CAF50; color: white; padding: 2px 10px; border-radius: 10px; margin-left: 10px;">10 ƒëi·ªÉm</span>
    </div>

    <div class="container">
        <!-- Map Preview -->
        <section class="map-preview">
            <h2><i class="fas fa-map"></i> B·∫£n ƒë·ªì du l·ªãch th√¥ng minh</h2>
            <p>Kh√°m ph√° c√°c ƒëi·ªÉm ƒë·∫øn tuy·ªát v·ªùi c·ªßa Vi·ªát Nam tr√™n b·∫£n ƒë·ªì t∆∞∆°ng t√°c</p>
            
            <div class="map-placeholder" id="map"></div>
            
            <div style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="calculateRoute()">
                    <i class="fas fa-route"></i> T√≠nh l·ªô tr√¨nh
                </button>
                <button class="btn btn-secondary" onclick="clearRoute()" style="margin-left: 10px;">
                    <i class="fas fa-times"></i> X√≥a l·ªô tr√¨nh
                </button>
                <button class="btn btn-primary" onclick="showCurrentLocation()" style="margin-left: 10px;">
                    <i class="fas fa-location-dot"></i> V·ªã tr√≠ c·ªßa t√¥i
                </button>
            </div>
        </section>

        <!-- Features -->
        <section id="features" class="features">
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-route"></i></div>
                <h3>L·ªô tr√¨nh th√¥ng minh</h3>
                <p>AI t·∫°o l·ªô tr√¨nh t·ªëi ∆∞u d·ª±a tr√™n th·ªùi gian, s·ªü th√≠ch v√† ng√¢n s√°ch c·ªßa b·∫°n</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-landmark"></i></div>
                <h3>Di s·∫£n vƒÉn h√≥a</h3>
                <p>Kh√°m ph√° l·ªãch s·ª≠, vƒÉn h√≥a ƒë·∫±ng sau m·ªói di t√≠ch v·ªõi th√¥ng tin chi ti·∫øt</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-concierge-bell"></i></div>
                <h3>Ti·ªán √≠ch ƒë·ªãa ph∆∞∆°ng</h3>
                <p>T√¨m kh√°ch s·∫°n, nh√† h√†ng, b·ªánh vi·ªán v√† d·ªãch v·ª• quanh b·∫°n</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-mobile-alt"></i></div>
                <h3>M·ªçi thi·∫øt b·ªã</h3>
                <p>Truy c·∫≠p tr√™n ƒëi·ªán tho·∫°i, m√°y t√≠nh b·∫£ng, m√°y t√≠nh v·ªõi giao di·ªán t·ªëi ∆∞u</p>
            </div>
        </section>

        <!-- Technology Stack -->
        <section style="text-align: center; margin: 60px 0;">
            <h2><i class="fas fa-code"></i> C√¥ng ngh·ªá hi·ªán ƒë·∫°i</h2>
            <p>ƒê∆∞·ª£c x√¢y d·ª±ng v·ªõi nh·ªØng c√¥ng ngh·ªá ti√™n ti·∫øn nh·∫•t</p>
            
            <div class="tech-stack">
                <div class="tech-item">
                    <div class="tech-icon"><i class="fab fa-html5"></i></div>
                    <h4>HTML5</h4>
                </div>
                <div class="tech-item">
                    <div class="tech-icon"><i class="fab fa-css3-alt"></i></div>
                    <h4>CSS3</h4>
                </div>
                <div class="tech-item">
                    <div class="tech-icon"><i class="fab fa-js"></i></div>
                    <h4>JavaScript</h4>
                </div>
                <div class="tech-item">
                    <div class="tech-icon"><i class="fab fa-node-js"></i></div>
                    <h4>Node.js</h4>
                </div>
                <div class="tech-item">
                    <div class="tech-icon"><i class="fas fa-database"></i></div>
                    <h4>Firebase</h4>
                </div>
                <div class="tech-item">
                    <div class="tech-icon"><i class="fas fa-map"></i></div>
                    <h4>Leaflet.js</h4>
                </div>
            </div>
        </section>

        <!-- ========== PLANNER SECTION (ƒê√É TH√äM) ========== -->
        <section id="planner-section" class="planner-section">
            <h2><i class="fas fa-robot"></i> L·ªô tr√¨nh AI</h2>
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 30px;">
                Tr√≠ tu·ªá nh√¢n t·∫°o s·∫Ω gi√∫p b·∫°n t·∫°o l·ªô tr√¨nh ho√†n h·∫£o d·ª±a tr√™n s·ªü th√≠ch c√° nh√¢n
            </p>
            
            <div id="planner-container"></div>
            <div id="planner-results" style="margin-top: 30px;"></div>
            
            <button class="btn btn-primary" onclick="showItineraryPlanner()" style="margin-top: 20px;">
                <i class="fas fa-magic"></i> T·∫°o l·ªô tr√¨nh th√¥ng minh
            </button>
        </section>

        <!-- ========== FACILITIES SECTION (ƒê√É TH√äM) ========== -->
        <section id="facilities-section" style="text-align: center; margin: 80px 0;">
            <h2 style="font-size: 2.5rem; margin-bottom: 20px;">
                <i class="fas fa-concierge-bell"></i> Ti·ªán √≠ch & D·ªãch v·ª•
            </h2>
            <p style="font-size: 1.2rem; margin-bottom: 40px; max-width: 800px; margin-left: auto; margin-right: auto;">
                T√¨m ki·∫øm c√°c ti·ªán √≠ch xung quanh ƒëi·ªÉm du l·ªãch ƒë·ªÉ c√≥ chuy·∫øn ƒëi ho√†n h·∫£o
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 25px; max-width: 1000px; margin: 0 auto;">
                <button onclick="showFacilities('hotels')" class="facility-btn">
                    <i class="fas fa-hotel"></i><br>Kh√°ch s·∫°n
                </button>
                <button onclick="showFacilities('restaurants')" class="facility-btn">
                    <i class="fas fa-utensils"></i><br>Nh√† h√†ng
                </button>
                <button onclick="showFacilities('medical')" class="facility-btn">
                    <i class="fas fa-first-aid"></i><br>Y t·∫ø
                </button>
                <button onclick="showFacilities('services')" class="facility-btn">
                    <i class="fas fa-concierge-bell"></i><br>D·ªãch v·ª•
                </button>
                <button onclick="showFacilities('transport')" class="facility-btn">
                    <i class="fas fa-bus"></i><br>Di chuy·ªÉn
                </button>
                <button onclick="showFacilities('shopping')" class="facility-btn">
                    <i class="fas fa-shopping-cart"></i><br>Mua s·∫Øm
                </button>
            </div>
            
            <div id="facility-results" style="margin-top: 50px;"></div>
        </section>

        <!-- ========== PWA SECTION (ƒê√É TH√äM) ========== -->
        <section class="pwa-section">
            <h2><i class="fas fa-mobile-alt"></i> ·ª®ng d·ª•ng di ƒë·ªông</h2>
            <p style="font-size: 1.2rem; margin-bottom: 40px; max-width: 800px; margin-left: auto; margin-right: auto;">
                C√†i ƒë·∫∑t VietTravelGuide nh∆∞ m·ªôt ·ª©ng d·ª•ng tr√™n ƒëi·ªán tho·∫°i c·ªßa b·∫°n
            </p>
            
            <div class="pwa-features">
                <div class="pwa-feature">
                    <i class="fas fa-download"></i>
                    <h3>C√†i ƒë·∫∑t nhanh</h3>
                    <p>Kh√¥ng c·∫ßn c·ª≠a h√†ng ·ª©ng d·ª•ng, c√†i ƒë·∫∑t tr·ª±c ti·∫øp t·ª´ tr√¨nh duy·ªát</p>
                </div>
                <div class="pwa-feature">
                    <i class="fas fa-wifi-slash"></i>
                    <h3>Ho·∫°t ƒë·ªông ngo·∫°i tuy·∫øn</h3>
                    <p>Truy c·∫≠p th√¥ng tin ngay c·∫£ khi kh√¥ng c√≥ k·∫øt n·ªëi Internet</p>
                </div>
                <div class="pwa-feature">
                    <i class="fas fa-bolt"></i>
                    <h3>Nhanh nh∆∞ ch·ªõp</h3>
                    <p>T·∫£i c·ª±c nhanh v√† m∆∞·ª£t m√† tr√™n m·ªçi thi·∫øt b·ªã</p>
                </div>
                <div class="pwa-feature">
                    <i class="fas fa-bell"></i>
                    <h3>Th√¥ng b√°o</h3>
                    <p>Nh·∫≠n th√¥ng b√°o v·ªÅ khuy·∫øn m√£i v√† c·∫≠p nh·∫≠t m·ªõi</p>
                </div>
            </div>
            
            <div style="margin-top: 40px;">
                <button onclick="installPWA()" class="btn btn-primary pulse" style="padding: 18px 45px; font-size: 1.2rem;">
                    <i class="fas fa-plus-circle"></i> Th√™m v√†o m√†n h√¨nh ch√≠nh
                </button>
                <p style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Tr√™n ƒëi·ªán tho·∫°i: Ch·ªçn "Th√™m v√†o m√†n h√¨nh ch√≠nh" trong tr√¨nh ƒëuy·ªát
                </p>
            </div>
        </section>

        <!-- Call to Action -->
        <section style="text-align: center; margin: 80px 0;">
            <h2 style="font-size: 2.5rem; margin-bottom: 20px;">S·∫µn s√†ng kh√°m ph√°?</h2>
            <p style="font-size: 1.2rem; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                VietTravelGuide s·∫Ω ƒë·ªìng h√†nh c√πng b·∫°n trong m·ªçi chuy·∫øn ƒëi. T·ª´ k·∫ø ho·∫°ch chi ti·∫øt ƒë·∫øn nh·ªØng tr·∫£i nghi·ªám th·ª±c t·∫ø.
            </p>
            <div class="cta-buttons">
                <button class="btn btn-primary" onclick="startExploring()" style="padding: 20px 50px; font-size: 1.2rem;">
                    <i class="fas fa-rocket"></i> B·∫Øt ƒë·∫ßu ngay
                </button>
                <button class="btn btn-secondary" onclick="showDemoTour()" style="padding: 20px 50px; font-size: 1.2rem;">
                    <i class="fas fa-play"></i> Xem demo
                </button>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-info-circle"></i> V·ªÅ ch√∫ng t√¥i</h3>
                    <p>VietTravelGuide l√† h·ªá th·ªëng h∆∞·ªõng d·∫´n du l·ªãch th√¥ng minh, k·∫øt h·ª£p c√¥ng ngh·ªá AI v·ªõi vƒÉn h√≥a Vi·ªát Nam.</p>
                    <div style="margin-top: 15px;">
                        <span style="background: #4CAF50; color: white; padding: 3px 10px; border-radius: 15px; font-size: 12px;">
                            <i class="fas fa-code"></i> Open Source
                        </span>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-link"></i> Li√™n k·∫øt</h3>
                    <p><a href="https://github.com/lenguyenngocthieu55/VietTravelGuide" style="color: white; text-decoration: none; display: block; margin: 5px 0;">
                        <i class="fab fa-github"></i> GitHub Repository
                    </a></p>
                    <p><a href="https://lenguyenngocthieu55.github.io/VietTravelGuide/" style="color: white; text-decoration: none; display: block; margin: 5px 0;">
                        <i class="fas fa-globe"></i> Website ch√≠nh th·ª©c
                    </a></p>
                    <p><a href="#" onclick="showReportIssue()" style="color: white; text-decoration: none; display: block; margin: 5px 0;">
                        <i class="fas fa-bug"></i> B√°o l·ªói
                    </a></p>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-user"></i> T√°c gi·∫£ & Li√™n h·ªá</h3>
                    <p><strong>lenguyenngocthieu55</strong></p>
                    <p>D·ª± √°n ƒë∆∞·ª£c ph√°t tri·ªÉn v·ªõi s·ª± h·ªó tr·ª£ c·ªßa AI</p>
                    
                    <div class="social-links">
                        <a href="https://github.com/lenguyenngocthieu55" title="GitHub" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="mailto:lenguyenngocthieu55@gmail.com" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                        <a href="#" onclick="showContactForm()" title="Li√™n h·ªá">
                            <i class="fas fa-comment"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                <p>¬© 2024 VietTravelGuide. D·ª± √°n m√£ ngu·ªìn m·ªü - MIT License.</p>
                <p>Phi√™n b·∫£n: 1.0.0 | C·∫≠p nh·∫≠t: $(new Date().toLocaleDateString('vi-VN'))</p>
                <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">
                    <i class="fas fa-heart" style="color: #ff6b6b;"></i> Made with passion for Vietnamese tourism
                </p>
            </div>
        </div>
    </footer>

    <script>
        // ========== MAP FUNCTIONALITY ==========
        
        // Vietnam coordinates
        const vietnamCenter = [16.0, 108.0];
        
        // Tourist spots in Vietnam
        const touristSpots = [
            { name: "H√† N·ªôi", coords: [21.0285, 105.8542], type: "city", description: "Th·ªß ƒë√¥ Vi·ªát Nam" },
            { name: "V·ªãnh H·∫° Long", coords: [20.9101, 107.1839], type: "unesco", description: "Di s·∫£n thi√™n nhi√™n th·∫ø gi·ªõi" },
            { name: "Hu·∫ø", coords: [16.4637, 107.5909], type: "cultural", description: "C·ªë ƒë√¥ Vi·ªát Nam" },
            { name: "H·ªôi An", coords: [15.8801, 108.3380], type: "unesco", description: "Ph·ªë c·ªï H·ªôi An" },
            { name: "S√†i G√≤n", coords: [10.8231, 106.6297], type: "city", description: "Th√†nh ph·ªë H·ªì Ch√≠ Minh" },
            { name: "Ph√∫ Qu·ªëc", coords: [10.2236, 103.9608], type: "beach", description: "ƒê·∫£o ng·ªçc Ph√∫ Qu·ªëc" },
            { name: "ƒê√† L·∫°t", coords: [11.9465, 108.4419], type: "mountain", description: "Th√†nh ph·ªë ng√†n hoa" },
            { name: "Nha Trang", coords: [12.2388, 109.1967], type: "beach", description: "Th√†nh ph·ªë bi·ªÉn" },
            { name: "Sapa", coords: [22.3364, 103.8441], type: "mountain", description: "Th·ªã tr·∫•n s∆∞∆°ng m√π" },
            { name: "C·ªë ƒë√¥ Hoa L∆∞", coords: [20.2569, 105.9258], type: "historical", description: "Kinh ƒë√¥ ƒë·∫ßu ti√™n" },
            { name: "M≈©i N√©", coords: [10.9418, 108.2934], type: "beach", description: "Thi√™n ƒë∆∞·ªùng resort" },
            { name: "Tam C·ªëc - B√≠ch ƒê·ªông", coords: [20.2444, 105.9239], type: "cultural", description: "V·ªãnh H·∫° Long tr√™n c·∫°n" }
        ];

        let map;
        let markers = [];
        let routeLine = null;
        let userLocationMarker = null;

        // Initialize map when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initMap();
            loadTouristSpots();
            updateResultCount();
            checkPWAInstallable();
        });

        function initMap() {
            // Create map
            map = L.map('map').setView(vietnamCenter, 6);
            
            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors',
                maxZoom: 18
            }).addTo(map);
            
            // Add scale
            L.control.scale().addTo(map);
        }

        function loadTouristSpots() {
            // Clear existing markers
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];
            
            // Add markers for each tourist spot
            touristSpots.forEach(spot => {
                const marker = L.marker(spot.coords)
                    .addTo(map)
                    .bindPopup(`
                        <div style="text-align: center; min-width: 220px;">
                            <h3 style="margin: 0; color: #1e3c72;">${spot.name}</h3>
                            <p style="margin: 5px 0; color: #666; font-size: 14px;">${spot.description}</p>
                            <div style="margin: 10px 0;">
                                <span style="background: ${getColorByType(spot.type)}; 
                                            color: white; 
                                            padding: 3px 12px; 
                                            border-radius: 15px;
                                            font-size: 12px;
                                            display: inline-block;">
                                    <i class="fas fa-${getTypeIcon(spot.type)}"></i> ${getTypeName(spot.type)}
                                </span>
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button onclick="addToItinerary('${spot.name}', [${spot.coords}])" 
                                        style="flex: 1; 
                                               background: #4CAF50; 
                                               color: white; 
                                               border: none; 
                                               padding: 8px 12px; 
                                               border-radius: 5px; 
                                               cursor: pointer;
                                               font-size: 13px;">
                                    <i class="fas fa-plus"></i> Th√™m
                                </button>
                                <button onclick="flyToLocation([${spot.coords}])" 
                                        style="flex: 1; 
                                               background: #2196F3; 
                                               color: white; 
                                               border: none; 
                                               padding: 8px 12px; 
                                               border-radius: 5px; 
                                               cursor: pointer;
                                               font-size: 13px;">
                                    <i class="fas fa-location-arrow"></i> Xem
                                </button>
                            </div>
                        </div>
                    `);
                
                markers.push(marker);
            });
            
            // Fit bounds to show all markers
            if (markers.length > 0) {
                const group = new L.featureGroup(markers);
                map.fitBounds(group.getBounds().pad(0.1));
            }
        }

        function getColorByType(type) {
            const colors = {
                city: '#e74c3c',
                unesco: '#3498db',
                cultural: '#9b59b6',
                beach: '#f1c40f',
                mountain: '#e67e22',
                historical: '#34495e'
            };
            return colors[type] || '#95a5a6';
        }

        function getTypeIcon(type) {
            const icons = {
                city: 'city',
                unesco: 'award',
                cultural: 'landmark',
                beach: 'umbrella-beach',
                mountain: 'mountain',
                historical: 'history'
            };
            return icons[type] || 'map-marker';
        }

        function getTypeName(type) {
            const names = {
                city: 'Th√†nh ph·ªë',
                unesco: 'Di s·∫£n UNESCO',
                cultural: 'VƒÉn h√≥a',
                beach: 'Bi·ªÉn',
                mountain: 'N√∫i',
                historical: 'L·ªãch s·ª≠'
            };
            return names[type] || 'ƒêi·ªÉm tham quan';
        }

        function flyToLocation(coords) {
            map.flyTo(coords, 13);
        }

        // ========== SEARCH & FILTER FUNCTIONALITY ==========
        
        function searchLocation() {
            const searchInput = document.getElementById('search-input');
            const query = searchInput.value.trim();
            
            if (!query) {
                alert('Vui l√≤ng nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm');
                return;
            }
            
            // Search in tourist spots
            const results = touristSpots.filter(spot => 
                spot.name.toLowerCase().includes(query.toLowerCase()) ||
                spot.description.toLowerCase().includes(query.toLowerCase()) ||
                spot.type.toLowerCase().includes(query.toLowerCase())
            );
            
            if (results.length > 0) {
                // Update result count
                document.getElementById('result-count').textContent = `${results.length} ƒëi·ªÉm`;
                
                // Clear previous highlights
                markers.forEach(marker => {
                    marker.setOpacity(1);
                });
                
                // Highlight found markers
                results.forEach(result => {
                    const marker = markers.find(m => 
                        m.getLatLng().lat === result.coords[0] && 
                        m.getLatLng().lng === result.coords[1]
                    );
                    if (marker) {
                        marker.setOpacity(1);
                        marker.openPopup();
                        
                        // Fly to first result
                        if (results[0] === result) {
                            map.flyTo(result.coords, 10);
                        }
                    }
                });
                
                // Show success message
                const message = `T√¨m th·∫•y ${results.length} k·∫øt qu·∫£ cho "${query}":\n` + 
                              results.map(r => `‚Ä¢ ${r.name} (${r.description})`).join('\n');
                showNotification(message, 'success');
            } else {
                showNotification(`Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ cho "${query}". Th·ª≠ t√¨m v·ªõi t·ª´ kh√≥a kh√°c.`, 'error');
            }
        }

        function quickSearch(keyword) {
            document.getElementById('search-input').value = keyword;
            searchLocation();
            document.getElementById('search-suggestions').style.display = 'none';
        }

        function filterByType(type) {
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update filter status
            const typeNames = {
                'all': 'T·∫•t c·∫£ ƒëi·ªÉm du l·ªãch',
                'unesco': 'Di s·∫£n UNESCO',
                'beach': 'Bi·ªÉn ƒë·∫£o',
                'mountain': 'N√∫i r·ª´ng',
                'cultural': 'Di s·∫£n vƒÉn h√≥a',
                'historical': 'Di t√≠ch l·ªãch s·ª≠',
                'city': 'Th√†nh ph·ªë'
            };
            
            document.getElementById('current-filter').textContent = typeNames[type] || type;
            
            // Filter markers
            let visibleCount = 0;
            markers.forEach(marker => {
                const spot = touristSpots.find(s => 
                    s.coords[0] === marker.getLatLng().lat && 
                    s.coords[1] === marker.getLatLng().lng
                );
                
                if (type === 'all' || (spot && spot.type === type)) {
                    marker.setOpacity(1);
                    visibleCount++;
                } else {
                    marker.setOpacity(0.3);
                }
            });
            
            // Update result count
            document.getElementById('result-count').textContent = `${visibleCount} ƒëi·ªÉm`;
            
            // Show filter message
            if (type !== 'all') {
                const filteredSpots = touristSpots.filter(spot => spot.type === type);
                if (filteredSpots.length > 0) {
                    showNotification(`ƒêang hi·ªÉn th·ªã ${filteredSpots.length} ƒëi·ªÉm ${typeNames[type].toLowerCase()}`, 'info');
                }
            }
        }

        function updateResultCount() {
            document.getElementById('result-count').textContent = `${touristSpots.length} ƒëi·ªÉm`;
        }

        // ========== ITINERARY FUNCTIONALITY ==========
        
        let userItinerary = JSON.parse(localStorage.getItem('viettravel_itinerary') || '[]');
        
        function addToItinerary(name, coords) {
            if (userItinerary.some(item => item.name === name)) {
                showNotification(`"${name}" ƒë√£ c√≥ trong l·ªô tr√¨nh c·ªßa b·∫°n!`, 'warning');
                return;
            }
            
            const newItem = {
                name: name,
                coords: coords,
                added: new Date().toLocaleString(),
                id: Date.now()
            };
            
            userItinerary.push(newItem);
            localStorage.setItem('viettravel_itinerary', JSON.stringify(userItinerary));
            
            showNotification(`‚úÖ ƒê√£ th√™m "${name}" v√†o l·ªô tr√¨nh!\n\nHi·ªán c√≥ ${userItinerary.length} ƒëi·ªÉm trong l·ªô tr√¨nh.`, 'success');
            
            // Update UI
            updateItineraryUI();
        }
        
        function calculateRoute() {
            if (userItinerary.length < 2) {
                showNotification('C·∫ßn √≠t nh·∫•t 2 ƒëi·ªÉm trong l·ªô tr√¨nh ƒë·ªÉ t√≠nh ƒë∆∞·ªùng ƒëi.\n\nTh√™m ƒëi·ªÉm b·∫±ng c√°ch click v√†o marker tr√™n b·∫£n ƒë·ªì.', 'warning');
                return;
            }
            
            // Get coordinates from itinerary
            const latlngs = userItinerary.map(item => item.coords);
            
            // Remove existing route
            if (routeLine) {
                map.removeLayer(routeLine);
            }
            
            // Create new route line
            routeLine = L.polyline(latlngs, {
                color: '#4CAF50',
                weight: 4,
                opacity: 0.7,
                dashArray: '10, 10'
            }).addTo(map);
            
            // Fit bounds to show entire route
            map.fitBounds(latlngs);
            
            // Calculate total distance (simplified)
            let totalDistance = 0;
            for (let i = 0; i < latlngs.length - 1; i++) {
                totalDistance += calculateDistance(latlngs[i], latlngs[i + 1]);
            }
            
            const estimatedTime = Math.round(totalDistance / 50 * 60); // 50km/h average
            
            showNotification(
                `üó∫Ô∏è ƒê√£ t√≠nh l·ªô tr√¨nh cho ${userItinerary.length} ƒëi·ªÉm!\n\n` +
                `üìè T·ªïng kho·∫£ng c√°ch: ${totalDistance.toFixed(1)} km\n` +
                `‚è±Ô∏è Th·ªùi gian ∆∞·ªõc t√≠nh: ${estimatedTime} ph√∫t (t·ªëc ƒë·ªô 50km/h)\n\n` +
                `L·ªô tr√¨nh ƒë√£ ƒë∆∞·ª£c v·∫Ω tr√™n b·∫£n ƒë·ªì.`,
                'success'
            );
        }
        
        function clearRoute() {
            if (routeLine) {
                map.removeLayer(routeLine);
                routeLine = null;
                showNotification('ƒê√£ x√≥a l·ªô tr√¨nh kh·ªèi b·∫£n ƒë·ªì.', 'info');
            } else {
                showNotification('Kh√¥ng c√≥ l·ªô tr√¨nh n√†o ƒë·ªÉ x√≥a.', 'warning');
            }
        }
        
        function showCurrentLocation() {
            if (!navigator.geolocation) {
                showNotification('Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ƒë·ªãnh v·ªã.', 'error');
                return;
            }
            
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const userCoords = [position.coords.latitude, position.coords.longitude];
                    
                    // Remove previous user marker
                    if (userLocationMarker) {
                        map.removeLayer(userLocationMarker);
                    }
                    
                    // Add new user marker
                    userLocationMarker = L.marker(userCoords, {
                        icon: L.divIcon({
                            className: 'user-location-marker',
                            html: '<div style="background: #2196F3; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);"></div>',
                            iconSize: [26, 26]
                        })
                    })
                    .addTo(map)
                    .bindPopup('<b>V·ªã tr√≠ c·ªßa b·∫°n</b><br>B·∫°n ƒëang ·ªü ƒë√¢y!')
                    .openPopup();
                    
                    // Fly to user location
                    map.flyTo(userCoords, 13);
                    
                    // Show nearby spots
                    const nearbySpots = touristSpots
                        .map(spot => ({
                            ...spot,
                            distance: calculateDistance(userCoords, spot.coords)
                        }))
                        .filter(spot => spot.distance < 100) // within 100km
                        .sort((a, b) => a.distance - b.distance)
                        .slice(0, 5);
                    
                    if (nearbySpots.length > 0) {
                        setTimeout(() => {
                            showNotification(
                                `üìç B·∫°n ƒëang g·∫ßn ${nearbySpots.length} ƒëi·ªÉm du l·ªãch:\n\n` +
                                nearbySpots.map(s => `‚Ä¢ ${s.name} (${s.distance.toFixed(1)} km)`).join('\n'),
                                'info'
                            );
                        }, 1000);
                    }
                },
                function(error) {
                    showNotification('Kh√¥ng th·ªÉ l·∫•y v·ªã tr√≠ c·ªßa b·∫°n. Vui l√≤ng ki·ªÉm tra c√†i ƒë·∫∑t v·ªã tr√≠.', 'error');
                }
            );
        }
        
        function calculateDistance(coord1, coord2) {
            const [lat1, lon1] = coord1;
            const [lat2, lon2] = coord2;
            
            // Haversine formula
            const R = 6371; // Earth radius in km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon/2) * Math.sin(dLon/2);
            
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }
        
        function updateItineraryUI() {
            // Update itinerary count in UI if exists
            const itineraryCount = document.getElementById('itinerary-count');
            if (itineraryCount) {
                itineraryCount.textContent = userItinerary.length;
            }
        }
        
        // ========== ITINERARY PLANNER ==========
        
        function showItineraryPlanner() {
            const html = `
                <div style="background: rgba(255,255,255,0.9); padding: 30px; border-radius: 20px; max-width: 500px; margin: 20px auto; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                    <h3 style="color: #1e3c72; text-align: center; margin-bottom: 30px;">
                        <i class="fas fa-robot"></i> T·∫°o l·ªô tr√¨nh AI
                    </h3>
                    
                    <div style="margin: 20px 0;">
                        <label style="display: block; margin-bottom: 8px; color: #333;">
                            <i class="fas fa-calendar-day"></i> S·ªë ng√†y du l·ªãch:
                        </label>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <input type="range" id="planner-days" min="1" max="14" value="3" 
                                   style="flex: 1;">
                            <span id="days-value" style="background: #1e3c72; color: white; padding: 5px 15px; border-radius: 20px; min-width: 60px; text-align: center;">
                                3 ng√†y
                            </span>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <label style="display: block; margin-bottom: 8px; color: #333;">
                            <i class="fas fa-money-bill-wave"></i> Ng√¢n s√°ch:
                        </label>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <input type="range" id="planner-budget" min="1" max="20" value="5" 
                                   style="flex: 1;">
                            <span id="budget-value" style="background: #4CAF50; color: white; padding: 5px 15px; border-radius: 20px; min-width: 100px; text-align: center;">
                                5 tri·ªáu VND
                            </span>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <label style="display: block; margin-bottom: 10px; color: #333;">
                            <i class="fas fa-heart"></i> S·ªü th√≠ch c·ªßa b·∫°n:
                        </label>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                            <label style="display: flex; flex-direction: column; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; cursor: pointer;">
                                <input type="checkbox" value="beach" style="margin-bottom: 10px;">
                                <i class="fas fa-umbrella-beach" style="color: #f1c40f; font-size: 1.5rem; margin-bottom: 5px;"></i>
                                <span style="font-size: 12px;">Bi·ªÉn</span>
                            </label>
                            <label style="display: flex; flex-direction: column; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; cursor: pointer;">
                                <input type="checkbox" value="mountain" style="margin-bottom: 10px;">
                                <i class="fas fa-mountain" style="color: #e67e22; font-size: 1.5rem; margin-bottom: 5px;"></i>
                                <span style="font-size: 12px;">N√∫i</span>
                            </label>
                            <label style="display: flex; flex-direction: column; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; cursor: pointer;">
                                <input type="checkbox" value="history" style="margin-bottom: 10px;">
                                <i class="fas fa-landmark" style="color: #9b59b6; font-size: 1.5rem; margin-bottom: 5px;"></i>
                                <span style="font-size: 12px;">L·ªãch s·ª≠</span>
                            </label>
                            <label style="display: flex; flex-direction: column; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; cursor: pointer;">
                                <input type="checkbox" value="food" style="margin-bottom: 10px;">
                                <i class="fas fa-utensils" style="color: #e74c3c; font-size: 1.5rem; margin-bottom: 5px;"></i>
                                <span style="font-size: 12px;">·∫®m th·ª±c</span>
                            </label>
                            <label style="display: flex; flex-direction: column; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; cursor: pointer;">
                                <input type="checkbox" value="culture" style="margin-bottom: 10px;">
                                <i class="fas fa-theater-masks" style="color: #3498db; font-size: 1.5rem; margin-bottom: 5px;"></i>
                                <span style="font-size: 12px;">VƒÉn h√≥a</span>
                            </label>
                            <label style="display: flex; flex-direction: column; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; cursor: pointer;">
                                <input type="checkbox" value="adventure" style="margin-bottom: 10px;">
                                <i class="fas fa-hiking" style="color: #2ecc71; font-size: 1.5rem; margin-bottom: 5px;"></i>
                                <span style="font-size: 12px;">Phi√™u l∆∞u</span>
                            </label>
                        </div>
                    </div>
                    
                    <button onclick="generateSmartItinerary()" 
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                   color: white; 
                                   padding: 15px; 
                                   border: none; 
                                   border-radius: 10px; 
                                   width: 100%; 
                                   cursor: pointer;
                                   font-size: 16px;
                                   font-weight: bold;
                                   margin-top: 20px;">
                        <i class="fas fa-magic"></i> T·∫°o l·ªô tr√¨nh th√¥ng minh
                    </button>
                </div>
            `;
            
            document.getElementById('planner-container').innerHTML = html;
            
            // Update value displays
            document.getElementById('planner-days').addEventListener('input', function() {
                document.getElementById('days-value').textContent = this.value + ' ng√†y';
            });
            
            document.getElementById('planner-budget').addEventListener('input', function() {
                document.getElementById('budget-value').textContent = this.value + ' tri·ªáu VND';
            });
        }
        
        function generateSmartItinerary() {
            const days = parseInt(document.getElementById('planner-days').value);
            const budget = parseInt(document.getElementById('planner-budget').value) * 1000000;
            const checkboxes = document.querySelectorAll('#planner-container input[type="checkbox"]:checked');
            const interests = Array.from(checkboxes).map(cb => cb.value);
            
            if (interests.length === 0) {
                showNotification('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt s·ªü th√≠ch!', 'warning');
                return;
            }
            
            // Simple AI itinerary generation
            const recommendedSpots = [];
            
            // Match interests with spot types
            interests.forEach(interest => {
                const matchingSpots = touristSpots.filter(spot => {
                    const interestMap = {
                        'beach': ['beach'],
                        'mountain': ['mountain'],
                        'history': ['historical', 'cultural'],
                        'culture': ['cultural', 'unesco'],
                        'food': ['city'],
                        'adventure': ['mountain', 'beach']
                    };
                    
                    return interestMap[interest]?.includes(spot.type);
                });
                
                recommendedSpots.push(...matchingSpots.slice(0, 2));
            });
            
            // Remove duplicates
            const uniqueSpots = Array.from(new Set(recommendedSpots.map(s => s.name)))
                .map(name => recommendedSpots.find(s => s.name === name));
            
            // Limit by days (approx 2-3 spots per day)
            const maxSpots = Math.min(days * 2.5, uniqueSpots.length);
            const finalItinerary = uniqueSpots.slice(0, maxSpots);
            
            // Display results
            let resultHTML = `
                <div style="background: rgba(255,255,255,0.95); padding: 25px; border-radius: 15px; margin-top: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.15);">
                    <h4 style="color: #1e3c72; margin-bottom: 15px; text-align: center;">
                        <i class="fas fa-map-marked-alt"></i> L·ªô tr√¨nh ${days} ng√†y ƒë·ªÅ xu·∫•t
                    </h4>
                    <p style="color: #666; margin-bottom: 20px; text-align: center;">
                        ${finalItinerary.length} ƒëi·ªÉm ph√π h·ª£p v·ªõi s·ªü th√≠ch c·ªßa b·∫°n
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-bottom: 25px;">
            `;
            
            finalItinerary.forEach((spot, index) => {
                resultHTML += `
                    <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid ${getColorByType(spot.type)}; box-shadow: 0 3px 10px rgba(0,0,0,0.08);">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="background: ${getColorByType(spot.type)}; 
                                        color: white; 
                                        width: 30px; 
                                        height: 30px; 
                                        border-radius: 50%; 
                                        display: flex; 
                                        align-items: center; 
                                        justify-content: center;
                                        margin-right: 10px;
                                        font-weight: bold;">
                                ${index + 1}
                            </div>
                            <strong style="color: #1e3c72;">${spot.name}</strong>
                        </div>
                        <div style="font-size: 13px; color: #666; margin-bottom: 10px;">
                            ${spot.description}
                        </div>
                        <button onclick="addToItinerary('${spot.name}', [${spot.coords}])" 
                                style="background: ${getColorByType(spot.type)}; 
                                       color: white; 
                                       border: none; 
                                       padding: 8px 15px; 
                                       border-radius: 5px; 
                                       cursor: pointer;
                                       width: 100%;
                                       font-size: 13px;
                                       transition: opacity 0.3s;">
                            <i class="fas fa-plus"></i> Th√™m v√†o l·ªô tr√¨nh
                        </button>
                    </div>
                `;
            });
            
            resultHTML += `
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <button onclick="addAllToItinerary()" 
                                style="background: #2196F3; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                            <i class="fas fa-plus-square"></i> Th√™m t·∫•t c·∫£
                        </button>
                        <button onclick="calculateRoute()" 
                                style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                            <i class="fas fa-route"></i> Xem tr√™n b·∫£n ƒë·ªì
                        </button>
                        <button onclick="saveItineraryToLocal()" 
                                style="background: #FF9800; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                            <i class="fas fa-save"></i> L∆∞u l·ªô tr√¨nh
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('planner-results').innerHTML = resultHTML;
            
            // Add hover effects
            setTimeout(() => {
                document.querySelectorAll('#planner-results button').forEach(btn => {
                    btn.addEventListener('mouseenter', function() {
                        this.style.opacity = '0.9';
                    });
                    btn.addEventListener('mouseleave', function() {
                        this.style.opacity = '1';
                    });
                });
            }, 100);
        }
        
        function addAllToItinerary() {
            const spots = touristSpots.slice(0, 5); // Add first 5 spots as demo
            spots.forEach(spot => {
                if (!userItinerary.some(item => item.name === spot.name)) {
                    userItinerary.push({
                        name: spot.name,
                        coords: spot.coords,
                        added: new Date().toLocaleString(),
                        id: Date.now()
                    });
                }
            });
            localStorage.setItem('viettravel_itinerary', JSON.stringify(userItinerary));
            showNotification(`ƒê√£ th√™m ${spots.length} ƒëi·ªÉm v√†o l·ªô tr√¨nh!`, 'success');
            updateItineraryUI();
        }
        
        function saveItineraryToLocal() {
            const itineraryData = {
                itinerary: userItinerary,
                generated: new Date().toISOString(),
                version: '1.0'
            };
            
            const blob = new Blob([JSON.stringify(itineraryData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `viettravelguide-itinerary-${new Date().toISOString().slice(0,10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('L·ªô tr√¨nh ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh file JSON!', 'success');
        }
        
        // ========== FACILITIES FUNCTIONALITY ==========
        
        const facilitiesData = {
            hotels: [
                { name: "Kh√°ch s·∫°n 5 sao", type: "luxury", price: "2,000,000+ VND", rating: "4.5/5", features: ["H·ªì b∆°i", "Spa", "Nh√† h√†ng"] },
                { name: "Kh√°ch s·∫°n 3-4 sao", type: "mid-range", price: "800,000-1,500,000 VND", rating: "4.0/5", features: ["WiFi", "B·ªØa s√°ng", "ƒê·ªó xe"] },
                { name: "Nh√† ngh·ªâ", type: "budget", price: "200,000-500,000 VND", rating: "3.5/5", features: ["C∆° b·∫£n", "Gi√° r·∫ª"] },
                { name: "Homestay", type: "local", price: "300,000-800,000 VND", rating: "4.2/5", features: ["Tr·∫£i nghi·ªám", "Gia ƒë√¨nh"] }
            ],
            restaurants: [
                { name: "Nh√† h√†ng cao c·∫•p", type: "fine-dining", cuisine: "Qu·ªëc t·∫ø", rating: "4.3/5", price: "500,000+ VND" },
                { name: "Nh√† h√†ng ƒë·ªãa ph∆∞∆°ng", type: "local", cuisine: "ƒê·∫∑c s·∫£n", rating: "4.5/5", price: "150,000-300,000 VND" },
                { name: "Qu√°n ƒÉn ƒë∆∞·ªùng ph·ªë", type: "street-food", cuisine: "B√¨nh d√¢n", rating: "4.7/5", price: "30,000-100,000 VND" },
                { name: "Qu√°n c√† ph√™", type: "cafe", cuisine: "ƒê·ªì u·ªëng", rating: "4.4/5", price: "40,000-80,000 VND" }
            ],
            medical: [
                { name: "B·ªánh vi·ªán ƒëa khoa", type: "hospital", emergency: "C√≥", phone: "115", services: ["C·∫•p c·ª©u", "Kh√°m b·ªánh"] },
                { name: "Ph√≤ng kh√°m", type: "clinic", emergency: "Kh√¥ng", phone: "ƒê·ªãa ph∆∞∆°ng", services: ["Kh√°m th∆∞·ªùng"] },
                { name: "Nh√† thu·ªëc", type: "pharmacy", emergency: "Kh√¥ng", phone: "ƒê·ªãa ph∆∞∆°ng", services: ["Thu·ªëc", "D·ª•ng c·ª• y t·∫ø"] }
            ],
            services: [
                { name: "ATM", type: "banking", availability: "24/7", banks: ["Vietcombank", "Techcombank", "BIDV"] },
                { name: "Tr·∫°m xƒÉng", type: "fuel", availability: "6:00-22:00", brands: ["Petrolimex", "Shell"] },
                { name: "WiFi c√¥ng c·ªông", type: "internet", availability: "Mi·ªÖn ph√≠", locations: ["C√¥ng vi√™n", "Th∆∞ vi·ªán"] },
                { name: "B·∫øn xe/bus", type: "transport", availability: "5:00-23:00", routes: ["N·ªôi th√†nh", "Li√™n t·ªânh"] }
            ],
            transport: [
                { name: "Taxi", type: "taxi", companies: ["Mai Linh", "Vinasun", "Grab"], phone: "ƒê·∫∑t xe app" },
                { name: "Xe m√°y thu√™", type: "motorbike", price: "100,000-200,000 VND/ng√†y", requirement: "B·∫±ng l√°i" },
                { name: "Xe ƒë·∫°p", type: "bicycle", price: "50,000 VND/ng√†y", features: ["Th·ªÉ thao", "Tham quan"] }
            ],
            shopping: [
                { name: "Ch·ª£ ƒë·ªãa ph∆∞∆°ng", type: "market", items: ["ƒê·∫∑c s·∫£n", "Qu√† l∆∞u ni·ªám"], hours: "S√°ng s·ªõm" },
                { name: "Trung t√¢m th∆∞∆°ng m·∫°i", type: "mall", brands: ["Th·ªùi trang", "·∫®m th·ª±c"], hours: "9:00-22:00" },
                { name: "C·ª≠a h√†ng l∆∞u ni·ªám", type: "souvenir", items: ["ƒê·ªì th·ªß c√¥ng", "B∆∞u thi·∫øp"], price: "30,000-500,000 VND" }
            ]
        };
        
        function showFacilities(type) {
            const facilities = facilitiesData[type] || [];
            const typeNames = {
                'hotels': 'Kh√°ch s·∫°n & Nh√† ngh·ªâ',
                'restaurants': 'Nh√† h√†ng & ƒÇn u·ªëng',
                'medical': 'Y t·∫ø & S·ª©c kh·ªèe',
                'services': 'D·ªãch v·ª• ti·ªán √≠ch',
                'transport': 'Di chuy·ªÉn',
                'shopping': 'Mua s·∫Øm'
            };
            
            let html = `
                <div style="background: white; padding: 40px; border-radius: 20px; margin-top: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.1);">
                    <h4 style="color: #1e3c72; margin-bottom: 30px; text-align: center; font-size: 1.8rem;">
                        <i class="fas fa-${getFacilityIcon(type)}" style="margin-right: 10px;"></i> ${typeNames[type]}
                    </h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px;">
            `;
            
            facilities.forEach((facility, index) => {
                html += `
                    <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); 
                                padding: 25px; 
                                border-radius: 15px; 
                                border-left: 5px solid #4CAF50;
                                box-shadow: 0 5px 15px rgba(0,0,0,0.05);
                                transition: transform 0.3s ease;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <div style="background: #1e3c72; 
                                        color: white; 
                                        width: 35px; 
                                        height: 35px; 
                                        border-radius: 50%; 
                                        display: flex; 
                                        align-items: center; 
                                        justify-content: center;
                                        margin-right: 15px;
                                        font-weight: bold;">
                                ${index + 1}
                            </div>
                            <h5 style="margin: 0; color: #1e3c72; font-size: 1.2rem;">${facility.name}</h5>
                        </div>
                        
                        <div style="font-size: 14px; color: #555;">
                            <div style="margin-bottom: 8px;">
                                <strong>Lo·∫°i:</strong> ${facility.type}
                            </div>
                            ${facility.price ? `<div style="margin-bottom: 8px;"><strong>Gi√°:</strong> ${facility.price}</div>` : ''}
                            ${facility.rating ? `<div style="margin-bottom: 8px;"><strong>ƒê√°nh gi√°:</strong> ${facility.rating}</div>` : ''}
                            ${facility.cuisine ? `<div style="margin-bottom: 8px;"><strong>·∫®m th·ª±c:</strong> ${facility.cuisine}</div>` : ''}
                            ${facility.emergency ? `<div style="margin-bottom: 8px;"><strong>C·∫•p c·ª©u:</strong> ${facility.emergency}</div>` : ''}
                            ${facility.phone ? `<div style="margin-bottom: 8px;"><strong>ƒêi·ªán tho·∫°i:</strong> ${facility.phone}</div>` : ''}
                            ${facility.availability ? `<div style="margin-bottom: 8px;"><strong>Gi·ªù ho·∫°t ƒë·ªông:</strong> ${facility.availability}</div>` : ''}
                            ${facility.features ? `<div style="margin-bottom: 8px;"><strong>Ti·ªán √≠ch:</strong> ${facility.features.join(', ')}</div>` : ''}
                            ${facility.services ? `<div style="margin-bottom: 8px;"><strong>D·ªãch v·ª•:</strong> ${facility.services.join(', ')}</div>` : ''}
                            ${facility.banks ? `<div style="margin-bottom: 8px;"><strong>Ng√¢n h√†ng:</strong> ${facility.banks.join(', ')}</div>` : ''}
                            ${facility.brands ? `<div><strong>Th∆∞∆°ng hi·ªáu:</strong> ${facility.brands.join(', ')}</div>` : ''}
                        </div>
                    </div>
                `;
            });
            
            html += `
                    </div>
                    
                    <div style="margin-top: 35px; padding: 20px; background: #e3f2fd; border-radius: 10px; text-align: center;">
                        <p style="margin: 0; color: #1565c0; font-size: 14px;">
                            <i class="fas fa-info-circle" style="margin-right: 8px;"></i>
                            Th√¥ng tin mang t√≠nh ch·∫•t tham kh·∫£o. Vui l√≤ng ki·ªÉm tra th·ª±c t·∫ø v√† gi√° c·∫£ t·∫°i th·ªùi ƒëi·ªÉm s·ª≠ d·ª•ng.
                        </p>
                    </div>
                </div>
            `;
            
            document.getElementById('facility-results').innerHTML = html;
            
            // Add hover effects
            setTimeout(() => {
                document.querySelectorAll('#facility-results > div > div > div').forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-5px)';
                        this.style.boxShadow = '0 10px 25px rgba(0,0,0,0.1)';
                    });
                    card.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.05)';
                    });
                });
            }, 100);
        }
        
        function getFacilityIcon(type) {
            const icons = {
                'hotels': 'hotel',
                'restaurants': 'utensils',
                'medical': 'first-aid',
                'services': 'concierge-bell',
                'transport': 'bus',
                'shopping': 'shopping-cart'
            };
            return icons[type] || 'info-circle';
        }
        
        // ========== PWA FUNCTIONALITY ==========
        
        let deferredPrompt;
        
        function checkPWAInstallable() {
            // Check if PWA is already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log('PWA ƒë√£ ƒë∆∞·ª£c c√†i ƒë·∫∑t');
                // Hide install button if already installed
                const installBtn = document.querySelector('.pwa-section button');
                if (installBtn) {
                    installBtn.style.display = 'none';
                    installBtn.parentElement.innerHTML = `
                        <div style="background: #4CAF50; color: white; padding: 15px; border-radius: 10px;">
                            <i class="fas fa-check-circle"></i> ·ª®ng d·ª•ng ƒë√£ ƒë∆∞·ª£c c√†i ƒë·∫∑t
                        </div>
                    `;
                }
            }
        }
        
        function installPWA() {
            if (deferredPrompt) {
                // Show the install prompt
                deferredPrompt.prompt();
                
                // Wait for the user to respond to the prompt
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showNotification('·ª®ng d·ª•ng ƒë√£ ƒë∆∞·ª£c c√†i ƒë·∫∑t th√†nh c√¥ng!', 'success');
                        console.log('User accepted the install prompt');
                    } else {
                        showNotification('C√†i ƒë·∫∑t ƒë√£ b·ªã h·ªßy.', 'info');
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                });
            } else {
                showNotification(
                    'ƒê·ªÉ c√†i ƒë·∫∑t ·ª©ng d·ª•ng:\n\n' +
                    'Tr√™n Android/Chrome: ‚Ä¢ Ch·ªçn menu (3 ch·∫•m) ‚Üí "Th√™m v√†o m√†n h√¨nh ch√≠nh"\n' +
                    'Tr√™n iOS/Safari: ‚Ä¢ Ch·ªçn n√∫t chia s·∫ª ‚Üí "Th√™m v√†o M√†n h√¨nh ch√≠nh"\n' +
                    'Tr√™n Desktop: ‚Ä¢ Click n√∫t c√†i ƒë·∫∑t tr√™n thanh ƒë·ªãa ch·ªâ',
                    'info'
                );
            }
        }
        
        // Capture the beforeinstallprompt event
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            // Update UI to notify the user they can install the PWA
            console.log('PWA c√≥ th·ªÉ c√†i ƒë·∫∑t');
        });
        
        // ========== UI ENHANCEMENTS ==========
        
        function startExploring() {
            showNotification(
                'üöÄ Ch√†o m·ª´ng ƒë·∫øn v·ªõi VietTravelGuide!\n\n' +
                'H√£y b·∫Øt ƒë·∫ßu b·∫±ng c√°ch:\n' +
                '1. üîç T√¨m ki·∫øm ƒëi·ªÉm du l·ªãch\n' +
                '2. üó∫Ô∏è Click marker tr√™n b·∫£n ƒë·ªì\n' +
                '3. üß† T·∫°o l·ªô tr√¨nh AI\n' +
                '4. üè® T√¨m ti·ªán √≠ch xung quanh\n\n' +
                'Ch√∫c b·∫°n c√≥ nh·ªØng tr·∫£i nghi·ªám tuy·ªát v·ªùi!',
                'success'
            );
        }
        
        function showDemoTour() {
            // Create a demo tour
            const demoSpots = touristSpots.slice(0, 3);
            let tourHTML = `
                <div style="background: white; padding: 30px; border-radius: 20px; margin: 20px auto; max-width: 600px; box-shadow: 0 15px 35px rgba(0,0,0,0.15);">
                    <h3 style="color: #1e3c72; text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-play-circle"></i> Demo h√†nh tr√¨nh 3 ng√†y
                    </h3>
                    
                    <div style="margin-bottom: 25px;">
            `;
            
            demoSpots.forEach((spot, index) => {
                tourHTML += `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid ${getColorByType(spot.type)};">
                        <div style="display: flex; align-items: center;">
                            <div style="background: ${getColorByType(spot.type)}; 
                                        color: white; 
                                        width: 30px; 
                                        height: 30px; 
                                        border-radius: 50%; 
                                        display: flex; 
                                        align-items: center; 
                                        justify-content: center;
                                        margin-right: 15px;
                                        font-weight: bold;">
                                ${index + 1}
                            </div>
                            <div>
                                <strong style="color: #1e3c72;">${spot.name}</strong>
                                <div style="font-size: 13px; color: #666;">${spot.description}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            tourHTML += `
                    </div>
                    
                    <div style="text-align: center;">
                        <button onclick="startDemoTour()" 
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                       color: white; 
                                       padding: 12px 30px; 
                                       border: none; 
                                       border-radius: 8px; 
                                       cursor: pointer;
                                       font-size: 16px;
                                       margin: 0 10px;">
                            <i class="fas fa-play"></i> B·∫Øt ƒë·∫ßu demo
                        </button>
                        <button onclick="closeDemo()" 
                                style="background: #f8f9fa; 
                                       color: #666; 
                                       padding: 12px 30px; 
                                       border: 1px solid #ddd; 
                                       border-radius: 8px; 
                                       cursor: pointer;
                                       font-size: 16px;
                                       margin: 0 10px;">
                            <i class="fas fa-times"></i> ƒê√≥ng
                        </button>
                    </div>
                </div>
            `;
            
            // Create modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            modal.innerHTML = tourHTML;
            document.body.appendChild(modal);
            
            // Add close function
            window.closeDemo = function() {
                document.body.removeChild(modal);
            };
        }
        
        function startDemoTour() {
            closeDemo();
            
            // Clear existing route
            clearRoute();
            
            // Add demo spots to itinerary
            const demoSpots = touristSpots.slice(0, 3);
            demoSpots.forEach(spot => {
                if (!userItinerary.some(item => item.name === spot.name)) {
                    userItinerary.push({
                        name: spot.name,
                        coords: spot.coords,
                        added: new Date().toLocaleString(),
                        id: Date.now()
                    });
                }
            });
            localStorage.setItem('viettravel_itinerary', JSON.stringify(userItinerary));
            
            // Calculate and show route
            setTimeout(() => {
                calculateRoute();
                showNotification('ƒê√£ t·∫°o demo h√†nh tr√¨nh 3 ƒëi·ªÉm! L·ªô tr√¨nh ƒëang ƒë∆∞·ª£c hi·ªÉn th·ªã tr√™n b·∫£n ƒë·ªì.', 'success');
            }, 500);
        }
        
        function showNotification(message, type = 'info') {
            // Remove existing notification
            const existing = document.getElementById('vtg-notification');
            if (existing) existing.remove();
            
            const colors = {
                'success': '#4CAF50',
                'error': '#f44336',
                'warning': '#FF9800',
                'info': '#2196F3'
            };
            
            const icon = {
                'success': 'fa-check-circle',
                'error': 'fa-exclamation-circle',
                'warning': 'fa-exclamation-triangle',
                'info': 'fa-info-circle'
            };
            
            const notification = document.createElement('div');
            notification.id = 'vtg-notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: white;
                color: #333;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.2);
                z-index: 1000;
                max-width: 400px;
                border-left: 5px solid ${colors[type]};
                animation: slideIn 0.3s ease-out;
                font-family: inherit;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: flex-start;">
                    <i class="fas ${icon[type]}" style="color: ${colors[type]}; font-size: 1.2rem; margin-right: 10px; margin-top: 2px;"></i>
                    <div style="flex: 1; white-space: pre-line; font-size: 14px;">${message}</div>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; color: #999; cursor: pointer; margin-left: 10px; font-size: 1.2rem;">
                        √ó
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOut 0.3s ease-out';
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }
        
        function showReportIssue() {
            const email = 'lenguyenngocthieu55@gmail.com';
            const subject = encodeURIComponent('[VietTravelGuide] B√°o l·ªói/H·ªó tr·ª£');
            const body = encodeURIComponent(`Xin ch√†o,\n\nT√¥i g·∫∑p v·∫•n ƒë·ªÅ v·ªõi:\n\n1. M√¥ t·∫£ l·ªói:\n2. Trang/Ch·ª©c nƒÉng:\n3. Thi·∫øt b·ªã/Tr√¨nh duy·ªát:\n\nC·∫£m ∆°n!`);
            
            window.open(`mailto:${email}?subject=${subject}&body=${body}`, '_blank');
        }
        
        function showContactForm() {
            showNotification(
                'üìß Li√™n h·ªá:\n\n' +
                'Email: lenguyenngocthieu55@gmail.com\n' +
                'GitHub: https://github.com/lenguyenngocthieu55\n\n' +
                'Vui l√≤ng g·ª≠i email cho ch√∫ng t√¥i!',
                'info'
            );
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            .user-location-marker {
                background: none !important;
                border: none !important;
            }
        `;
        document.head.appendChild(style);
        
        // Event Listeners
        document.getElementById('search-input').addEventListener('focus', function() {
            document.getElementById('search-suggestions').style.display = 'block';
        });

        document.getElementById('search-input').addEventListener('blur', function() {
            setTimeout(() => {
                document.getElementById('search-suggestions').style.display = 'none';
            }, 200);
        });

        document.getElementById('search-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchLocation();
            }
        });
        
        // Initialize
        window.onload = function() {
            console.log('VietTravelGuide ƒë√£ s·∫µn s√†ng!');
            console.log('ƒêi·ªÉm du l·ªãch:', touristSpots.length);
            console.log('L·ªô tr√¨nh hi·ªán t·∫°i:', userItinerary.length, 'ƒëi·ªÉm');
            
            // Check for PWA support
            if ('serviceWorker' in navigator) {
                console.log('PWA ƒë∆∞·ª£c h·ªó tr·ª£');
            }
            
            // Update copyright year
            const copyright = document.querySelector('.copyright p');
            if (copyright) {
                copyright.innerHTML = copyright.innerHTML.replace('2024', new Date().getFullYear());
            }
        };
    </script>
</body>
</html>
